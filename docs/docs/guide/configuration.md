

# **Introduction**

There is a config file which includes couple of variables that needs to be modified before start to run most of the
scripts in this project. Here is the guide for how to handle this config file with those variables.

## **Variables**

- **database_folder**: This variable is to define the path of the folder which will contain databases that will be created. 

- **api_database_folder**: This variable is to define the path of the folder which will contain databases of API. It is 
fixed and not recommended to change since it may effect the API.

- **db_to_convert**: This variable is to define the name of database with the date column in epoch format which will be
 used for `epoch_to_datetime.py` file. 

- **converted_db**: This variable is to define the name of database with the date column in datetime format which will be
 used for `epoch_to_datetime.py` file. 

- **first_epoch_of_hash**: This variable is to define the first date of hash fetching from [malshare archives](https://malshare.com/daily/).

- **malshare_api_key**: The variable where you will put your **api key** that you get from [malshare](https://malshare.com/).

- **hashes_db_name**: This variable is to define the name of database which contains hashes and dates for a couple of
 arguments of `malshare_script.py`.

- **details_db_name**: This variable is to define the name of database which contains details of hashes for a couple of
arguments of `malshare_script.py`.

- **fixed_hashes_db**: This variable is to define the name of hashes database that will be used for `malshare_script.py`
with `--update24` argument.

- **malshare_db_name**: This variable is to define the name of details database that will be used for `malshare_script.py`
with `--update` and also `--update24` arguments.

- **openbugbounty_db_name**: This variable is to define the name of database of [openbugbounty](http://feeds.feedburner.com/XSSPosed)'s 
RSS feed that will be used for `rss_tracker.py`.

- **cybercrimetracker_db_name**: This variable is to define the name of database of [cybercrimetracker](http://cybercrime-tracker.net/rss.xml)'s 
RSS feed that will be used for `rss_tracker.py`.

---

## **Usage**

### **`database_folder`**

This variable is the variable that you are going to define your database folder. Initially it is set to **'./Databases'**
folder.

### **`api_database_folder`**

This variable is the variable that you are going to define your database folder which will be used for you API. It will
contain the databases that people can access by using you API. Basically, whatever .db file which is database inside of
this folder, will be able to accessible via API. 

Since `malshare_script.py` has many arguments and it is not only for API usage but also for different purposes of usage,
I've decided to store the databases which will be used by API not in `database_folder` but in a seperated folder to avoid
conflicts.

Initially this variable is set to **'database_folder + 'api-db/' '** which means it will be always inside of 
`database_folder` variable. So all of the databases whetever using for API or for other purposes will be in the same
folder but using for API ones will be in a sub folder.

### **`db_to_convert`**

This variable is only for `epoch_to_datetime.py` script. Whatever the name you provide to this variable,
`epoch_to_datetime.py` script will look for a database that will be converted in the database folder that you define
with `database_folder` variable in **`config.py`**.

For example:

If you have a database named **'epoch_db.db'** with 2 columns **'hash'** and **'date'** (in epoch format) in a table named
**'data'**, set this variable to 'epoch_db.db' and `database_folder` variable to './Databases', `epoch_to_datetime.py` will
first look into './Databases' folder and it will require to find a database with the name 'epoch_db.db'. 

But when you try to run `epoch_to_datetime.py` without having a database named **'epoch_db.db'**, it will raise an error.

### **`converted_db`**

This variable is only for `epoch_to_datetime.py` script. Whatever the name you provide to this variable,
`epoch_to_datetime.py` script will create or update a database, in the database folder that you define with 
`database_folder` variable in **`config.py`**, depending on a database with this name exists or not.

### **`first_epoch_of_hash`**

This variable is only for `get_hashes_until_yesterday()` function of `malshare_script.py` script. This function is getting
date in epoch format as a parameter and fetching hashes for single day beginning from this parameter.

For example:

If you set `first_epoch_of_hash` variable to '1505347200' which is 2017-09-14, `get_hashes_until_yesterday` function
will fetch all of the hashes for every single day since 2017-09-14.

Assume that today's date is **2018-07-18** and you want to fetch the MD5 hashes since **6th of June, 2018**. What you need to do
is just set this variable to epoch format of 6th of June, 2018 which is **'1528243200'**. 

Here you go, you will have 
a database which will contain MD5 hashes beginning from 6th of June until 17th of July, which is yesterday, and this
database will have 2 columns;

- **hash**
- **date** (in epoch format)

### **`malshare_api_key`**

This variable is for your MalShare api key. You have to have an api key in order to use [MalShare API's](https://malshare.com/doc.php).

If you do not have an api key, you can register and obtain your api key [here](https://malshare.com/register.php).

>**Note: Standard keys allow 1000 API calls per day (including downloading samples, details lookup and search).**

### **`hashes_db_name`**

This variable is being used for the databases which includes hashes and sources. It is used for following arguments:

- **`--untilyesterday`**
- **`--hash2detail`**
- **`--sources24`**
- **`--bydate`**

Except the **`--sources24`** argument it creates or handles databases with a table named **hash_data**. This table has
2 columns which are **hash** and **date** (in epoch format). 

For the **`--sources24`** argument it creates or handles database with a table named **source_data**. This table has
2 columns which are **source** and **date** (in epoch format).

### **`details_db_name`**

This variable is being used for the databases which includes details of hashes. It is used only for `--hash2detail`
argument of **`malshare_script.py`**.

It creates or handles database with a table named **data**. This table has 4 columns which are **hash**, **f_type**, 
**source**, **date**.

### **`fixed_hashes_db`**

This variable is only being used for `--update24` argument of **`malshare_script.py`**. Set this variable to any db name
ending with '.db'. For example: `yesterday_hashes.db`

### **`malshare_db_name`**

This variable is being used for `--update24` and `--update` argument of **`malshare_script.py`**. Set this variable to
any db name ending with '.db' as you desire. For example: `malshare.db`.

It is initially set to **`'malshare.db'`**. Since `--update24` and `--update` arguments are using for API, it needed to
have a fixed details database name in order to run these arguments properly.

- `--update24` argument uses this variable as target database to update it every 24 hours.

- `--update` argument uses this variable as target database to update periodically depending on your job schedule. (Every
20 minutes for me.)

### **`openbugbounty_db_name`**

This variable is being used for `process_openbugbounty()` function of **`rss_tracker.py`** script. This function is getting
used for parsing RSS feed of [OpenBugBounty RSS feed ](http://feeds.feedburner.com/XSSPosed).

Change this variable to any database name ending with '.db' as you desire and this database will be storing your malware
details belonging to openbugbounty.

### **`cybercrimetracker_db_name`**

This variable is being used for `process_cybercrimetracker()` function of **`rss_tracker.py`** script. This function is getting
used for parsing RSS feed of [CyberCrime-Tracker RSS feed](http://cybercrime-tracker.net/rss.xml).

Change this variable to any database name ending with '.db' as you desire and this database will be storing your malware
details belonging to cybercrime-tracker.